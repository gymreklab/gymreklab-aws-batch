#!/bin/bash
date
echo "Args: $@"
env


#declare -a bams=(
#"HG00101_GBR_ERR1955403.bam"
#"HG00103_GBR_ERR1955439.bam"
#"HG00107_GBR_ERR1955492.bam"
#"HG00108_GBR_ERR1955418.bam"
#"HG00109_GBR_ERR1955541.bam"
#"HG00115_GBR_ERR1955445.bam"
#"HG00116_GBR_ERR1955508.bam"
#"HG00117_GBR_ERR1955517.bam"
#"HG00119_GBR_ERR1955447.bam"
#"HG00131_GBR_ERR1955399.bam"
#"HG00136_GBR_ERR1955474.bam"
#"HG00139_GBR_ERR1955521.bam" 
#"HG00181_FIN_ERR1955428.bam")


#declare -a bams=(
#"HG00109_GBR_ERR1955541.bam"
#"HG00185_FIN_ERR1955475.bam"
#"HG00190_FIN_ERR1955496.bam"
#"HG00256_GBR_ERR1955502.bam"
#"HG00264_GBR_ERR1955426.bam"
#"HG00267_FIN_ERR1955520.bam"
#"HG00273_FIN_ERR1955486.bam"
#"HG00277_FIN_ERR1955489.bam"
#"HG00280_FIN_ERR1955396.bam"
#"HG00284_FIN_ERR1955514.bam"
#"HG00351_FIN_ERR1955490.bam"
#"HG00358_FIN_ERR1955473.bam"
#"HG00366_FIN_ERR1955442.bam"
#"HG00369_FIN_ERR1955458.bam"
#"HG00371_FIN_ERR1955408.bam"
#"HG00372_FIN_ERR1955395.bam"
#"HG00448_CHS_ERR1955522.bam"
#"HG00449_CHS_ERR1955416.bam"
#"HG00583_CHS_ERR1955459.bam"
#"HG00584_CHS_ERR1955453.bam"
#"HG00595_CHS_ERR1955506.bam"
#"HG00596_CHS_ERR1955452.bam"
#"HG00610_CHS_ERR1955402.bam"
#"HG00611_CHS_ERR1955523.bam"
#"HG00613_CHS_ERR1955497.bam"
#"HG00614_CHS_ERR1955501.bam"
#"HG00650_CHS_ERR1955407.bam"
#"HG00651_CHS_ERR1955530.bam"
#"HG00656_CHS_ERR1955478.bam"
#"HG00657_CHS_ERR1955484.bam"
#"HG00662_CHS_ERR1955507.bam"
#"HG00663_CHS_ERR1955495.bam"
#"HG00683_CHS_ERR1955540.bam"
#"HG00684_CHS_ERR1955437.bam"
#"HG00844_CDX_ERR1955450.bam"
#"HG00881_CDX_ERR1955542.bam"
#"HG00982_CDX_ERR1955485.bam"
#"HG01619_IBS_ERR1955411.bam"
#"HG01620_IBS_ERR1955480.bam"
#"HG01623_IBS_ERR1955531.bam"
#"HG01624_IBS_ERR1955454.bam"
#"HG01625_IBS_ERR1955537.bam"
#"HG01626_IBS_ERR1955536.bam"
#"HG01628_IBS_ERR1955483.bam"
#"HG01630_IBS_ERR1955494.bam"
#"HG01682_IBS_ERR1955404.bam"
##"HG01684_IBS_ERR1955491.bam"
#"HG01685_IBS_ERR1955444.bam"
#"HG01686_IBS_ERR1955539.bam"
#"HG01707_IBS_ERR1955410.bam"
#"HG01708_IBS_ERR1955504.bam"
#"HG01756_IBS_ERR1955433.bam"
#"HG01757_IBS_ERR1955532.bam"
#"HG01761_IBS_ERR1955471.bam"
#"HG01762_IBS_ERR1955509.bam"
#"HG01770_IBS_ERR1955435.bam"
#"HG01771_IBS_ERR1955499.bam"
#"HG02016_KHV_ERR1955417.bam"
#"HG02017_KHV_ERR1955409.bam"
#"HG02069_KHV_ERR1955456.bam"
#"HG02070_KHV_ERR1955422.bam"
#"HG02072_KHV_ERR1955434.bam"
#"HG02073_KHV_ERR1955525.bam"
#"HG02075_KHV_ERR1955505.bam"
#"HG02076_KHV_ERR1955448.bam"
#"HG02130_KHV_ERR1955414.bam"
#"HG02131_KHV_ERR1955436.bam"
#"HG02356_CDX_ERR1955446.bam"
#"HG02372_CDX_ERR1955440.bam"
#"HG02373_CDX_ERR1955467.bam"
#"HG02374_CDX_ERR1955415.bam"
#"HG02375_CDX_ERR1955449.bam"
#"HG02381_CDX_ERR1955405.bam"
#"HG02383_CDX_ERR1955455.bam"
#"HG02384_CDX_ERR1955511.bam"
#"HG02385_CDX_ERR1955421.bam"
#"HG02386_CDX_ERR1955441.bam"
#"HG02388_CDX_ERR1955465.bam"
#"HG02391_CDX_ERR1955503.bam")

declare -a bams=(
"HG03100_ESN_ERR1955398.bam"
"HG03120_ESN_ERR1955487.bam"
"HG03121_ESN_ERR1955462.bam"
"HG03129_ESN_ERR1955431.bam"
"HG03130_ESN_ERR1955515.bam"
"HG03168_ESN_ERR1955528.bam"
"HG03169_ESN_ERR1955413.bam"
"HG03246_GWD_ERR1955464.bam"
"HG03247_GWD_ERR1955457.bam"
"HG03300_ESN_ERR1955481.bam"
"HG03301_ESN_ERR1955427.bam"
"HG03306_ESN_ERR1955461.bam"
"HG03307_ESN_ERR1955397.bam"
"HG03445_MSL_ERR1955516.bam"
"HG03451_MSL_ERR1955513.bam"
"HG03452_MSL_ERR1955488.bam"
"HG03484_MSL_ERR1955412.bam"
"HG03485_MSL_ERR1955424.bam"
"HG03520_ESN_ERR1955423.bam"
"HG03521_ESN_ERR1955529.bam"
"HG03574_MSL_ERR1955479.bam"
"HG03575_MSL_ERR1955468.bam"
"HG03577_MSL_ERR1955519.bam"
"HG03578_MSL_ERR1955498.bam"
"HG03582_MSL_ERR1955401.bam"
"HG03583_MSL_ERR1955535.bam")

## now loop through the above array
for i in "${bams[@]}"
do
   echo "$i"
BAMNAME=$i
ACC=$(basename $BAMNAME .bam)
aws batch submit-job \
    --job-name ena-150-${ACC} \
    --job-queue ena-150 \
    --job-definition ena-150:2 \
    --container-overrides 'command=["run_ena_150.sh",'"${BAMNAME}"'],environment=[{name="BATCH_FILE_TYPE",value="script"},{name="BATCH_FILE_S3_URL",value="s3://gymreklab-awsbatch/run_ena_150.sh"}]'

done

date
echo "bye bye!!"
